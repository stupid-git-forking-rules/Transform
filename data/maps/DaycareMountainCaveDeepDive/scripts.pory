mapscripts DaycareMountainCaveDeepDive_MapScripts{}

script GorebyssInCave{
    lock

    if(flag(FLAG_GOREBYSS_BATTLE))
    {
        faceplayer
        speakername("Gorebyss")
        createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
        msgbox("My brother Huntail doesnt care\nfor beauty.\pHe will attack you fiercely!\n", MSGBOX_DEFAULT)
        waitmessage
        removefieldmugshot
        release
        end
    }
    else
    {
        applymovement(Gorebyss, moves(face_player))
        waitmovement(Gorebyss)
        special(PlayTrainerEncounterMusic)
        applymovement(Gorebyss, Common_Movement_ExclamationMark)
        waitmovement(Gorebyss)
        delay(60)
        speakername("Gorebyss")
        createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
        msgbox("You are glowing!\nShow me how you illuminate\lthe deep with a battle!", MSGBOX_AUTOCLOSE)
        removefieldmugshot
        setwildbattle(SPECIES_GOREBYSS, 25)
        dowildbattle
        specialvar(VAR_RESULT, GetBattleOutcome)
        if (var(VAR_RESULT) == B_OUTCOME_WON)
        {
            speakername("Gorebyss")
            createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
            msgbox("You really are quite luminescent.\n", MSGBOX_DEFAULT)
            setflag(FLAG_GOREBYSS_BATTLE)
            waitmessage
            removefieldmugshot
            release
            end
        }
    }
}

script GorebyssInCaveTrigger{
    if(!flag(FLAG_GOREBYSS_BATTLE))
    {
        special(PlayTrainerEncounterMusic)
        applymovement(Gorebyss, Common_Movement_ExclamationMark)
        waitmovement(Gorebyss)
        delay(60)
        getplayerxy(VAR_TEMP_1, VAR_TEMP_2)
        switch(var(VAR_TEMP_1)) 
        {
        case 5:
            applymovement(LOCALID_PLAYER, moves(face_left))
            speakername("Gorebyss")
            createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
            msgbox("You are glowing!\nShow me how you illuminate\lthe deep with a battle!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_GOREBYSS, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Gorebyss")
                createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
                msgbox("You really are quite luminescent.\n", MSGBOX_DEFAULT)
                setflag(FLAG_GOREBYSS_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 6:
            applymovement(LOCALID_PLAYER, moves(face_left))
            applymovement(Gorebyss, moves(walk_right))
            waitmovement(Gorebyss)
            speakername("Gorebyss")
            createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
            msgbox("You are glowing!\nShow me how you illuminate\lthe deep with a battle!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_GOREBYSS, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Gorebyss")
                createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
                msgbox("You really are quite luminescent.\n", MSGBOX_DEFAULT)
                setflag(FLAG_GOREBYSS_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 7:
            applymovement(LOCALID_PLAYER, moves(face_left))
            applymovement(Gorebyss, moves(walk_right*2))
            waitmovement(Gorebyss)
            speakername("Gorebyss")
            createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
            msgbox("You are glowing!\nShow me how you illuminate\lthe deep with a battle!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_GOREBYSS, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Gorebyss")
                createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
                msgbox("You really are quite luminescent.\n", MSGBOX_DEFAULT)
                setflag(FLAG_GOREBYSS_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 8:
            applymovement(LOCALID_PLAYER, moves(face_left))
            applymovement(Gorebyss, moves(walk_right*3))
            waitmovement(Gorebyss)
            speakername("Gorebyss")
            createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
            msgbox("You are glowing!\nShow me how you illuminate\lthe deep with a battle!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_GOREBYSS, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Gorebyss")
                createfieldmugshot(MUGSHOT_GOREBYSS, EMOTE_NORMAL)
                msgbox("You really are quite luminescent.\n", MSGBOX_DEFAULT)
                setflag(FLAG_GOREBYSS_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }            
        }
    }
}

script HuntailInCave{
    lock
    faceplayer
    if(flag(FLAG_HUNTAIL_BATTLE))
    {
        speakername("Huntail")
        createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
        msgbox("Back into the dark...\nBut you swim well, little one.", MSGBOX_DEFAULT)
        waitmessage
        removefieldmugshot
        release
        end
    }
    else
    {
        applymovement(Huntail, moves(face_player))
        waitmovement(Huntail)        
        special(PlayTrainerEncounterMusic)
        applymovement(Huntail, Common_Movement_ExclamationMark)
        waitmovement(Huntail)
        delay(60)
        speakername("Huntail")
        createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
        msgbox("There's no need for light here in\nthe depths!", MSGBOX_AUTOCLOSE)
        removefieldmugshot
        setwildbattle(SPECIES_HUNTAIL, 25)
        dowildbattle
        specialvar(VAR_RESULT, GetBattleOutcome)
        if (var(VAR_RESULT) == B_OUTCOME_WON)
        {
            speakername("Huntail")
            createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
            msgbox("I prefer the the seafloor to be\ndark.", MSGBOX_DEFAULT)
            setflag(FLAG_HUNTAIL_BATTLE)
            waitmessage
            removefieldmugshot
            release
            end
        }
    }
}

script HuntailInCaveTrigger{
    if(!flag(FLAG_HUNTAIL_BATTLE))
    {
        special(PlayTrainerEncounterMusic)
        applymovement(Huntail, Common_Movement_ExclamationMark)
        waitmovement(Huntail)
        delay(60)
        getplayerxy(VAR_TEMP_1, VAR_TEMP_2)
        switch(var(VAR_TEMP_1)) 
        {
        case 26:
            applymovement(LOCALID_PLAYER, moves(face_right))
            speakername("Huntail")
            createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
            msgbox("There's no need for light here in\nthe depths!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_HUNTAIL, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Huntail")
                createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
                msgbox("I prefer the the seafloor to be\ndark.", MSGBOX_DEFAULT)
                setflag(FLAG_HUNTAIL_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 25:
            applymovement(LOCALID_PLAYER, moves(face_right))
            applymovement(Huntail, moves(walk_left))
            waitmovement(Huntail)
            speakername("Huntail")
            createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
            msgbox("There's no need for light here in\nthe depths!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_HUNTAIL, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Huntail")
                createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
                msgbox("I prefer the the seafloor to be\ndark.", MSGBOX_DEFAULT)
                setflag(FLAG_HUNTAIL_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 24:
            applymovement(LOCALID_PLAYER, moves(face_right))
            applymovement(Huntail, moves(walk_left*2))
            waitmovement(Huntail)
            speakername("Huntail")
            createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
            msgbox("There's no need for light here in\nthe depths!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_HUNTAIL, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Huntail")
                createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
                msgbox("I prefer the the seafloor to be\ndark.", MSGBOX_DEFAULT)
                setflag(FLAG_HUNTAIL_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }
        case 23:
            applymovement(LOCALID_PLAYER, moves(face_right))
            applymovement(Huntail, moves(walk_left*3))
            waitmovement(Huntail)
            speakername("Huntail")
            createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
            msgbox("There's no need for light here in\nthe depths!", MSGBOX_AUTOCLOSE)
            removefieldmugshot
            setwildbattle(SPECIES_HUNTAIL, 25)
            dowildbattle
            specialvar(VAR_RESULT, GetBattleOutcome)
            if (var(VAR_RESULT) == B_OUTCOME_WON)
            {
                speakername("Huntail")
                createfieldmugshot(MUGSHOT_HUNTAIL, EMOTE_NORMAL)
                msgbox("I prefer the the seafloor to be\ndark.", MSGBOX_DEFAULT)
                setflag(FLAG_HUNTAIL_BATTLE)
                waitmessage
                removefieldmugshot
                release
                end
            }            
        }
    }
}
